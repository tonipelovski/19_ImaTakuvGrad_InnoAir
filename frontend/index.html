<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">

	<title>Има такъв град</title>
	<meta content="" name="description">

	<meta content="" name="keywords">

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
		  rel="stylesheet">


	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<!-- Vendor CSS Files -->
	<link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
	<link href="assets/vendor/aos/aos.css" rel="stylesheet">
	<link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
	<link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
	<link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<!-- Template Main CSS File -->
	<link href="assets/css/style.css" rel="stylesheet">

</head>

<body>

<!-- ======= Header ======= -->
<header id="header" class="header fixed-top">
	<div class="container-fluid container-xl d-flex align-items-center justify-content-evenly">

		<a href="index.html" class="logo d-flex align-items-center">
			<img src="https://portal.sofiatraffic.bg/assets/logo/CGM-Logo-300x300px.png" alt="">
			<span>ЦСАОПСМГТ</span>
		</a>

		<nav id="navbar" class="navbar">
			<ul>
				<li><a class="nav-link scrollto active" href="#hero">Начало</a></li>
				<li><a class="nav-link scrollto" href="#vehiclesInfoSector">Превозни средства</a></li>
				<li style="padding-left: 5%"><input class="form-control mr-sm-2" id="searchBar" type="search"
													placeholder="Номер на ПС" aria-label="Search"></li>
				<li><a class="getstarted scrollto" href="javascript:searchVehicle();">Търсене</a></li>
			</ul>
			<i class="bi bi-list mobile-nav-toggle"></i>
		</nav><!-- .navbar -->

	</div>
</header><!-- End Header -->

<!-- ======= Hero Section ======= -->
<section id="hero" class="hero d-flex align-items-center">

	<div class="container">
		<div class="row">
			<div class="col-lg-6 d-flex flex-column justify-content-center">
				<h1 data-aos="fade-up">Модерен транспорт в модерен град</h1>
				<h2 data-aos="fade-up" data-aos-delay="400">Централизирана система за анализ и оценка на пътникопотока в
					системата на масовият градски транспорт (ЦСАОПСМГТ)</h2>
				<div data-aos="fade-up" data-aos-delay="600">
					<div class="text-center text-lg-start">
						<a href="#about"
						   class="btn-get-started scrollto d-inline-flex align-items-center justify-content-center align-self-center">
							<span>Get Started</span>
							<i class="bi bi-arrow-right"></i>
						</a>
					</div>
				</div>
			</div>
			<div class="col-lg-6 hero-img" data-aos="zoom-out" data-aos-delay="200">
				<img src="./assets/img/bus.png" style="height: 70%;" class="img-fluid" alt="">
			</div>
		</div>
	</div>

</section><!-- End Hero -->

<main id="main">
	<!-- ======= Info Section ======= -->
	<section id="vehiclesInfoSector">

		<div class="container" data-aos="fade-up">
			<div class="row gx-0">

				<h2 align="center" class="pagination-heading aos-init" style="color: #012970; font-weight: 700">Налични
					превозни средства</h2>
				<p align="center" style="margin-bottom:5%">The best from the rest</p>
				<div class="list-group" id="page" align="center">
					<ul>

					</ul>
				</div>
				<div class="container">
					<div class="row">
						<div class="col">

						</div>
						<div class="col">
							<nav aria-label="Page navigation example">
								<ul class="pagination" style="margin-left:20%;">
									<li class="page-item"><a class="page-link textColor" href="javascript:showPage(currentPage-1, 10);">Предишна</a></li>
									<li class="page-item"><a class="page-link textColor" href="javascript:showPage(currentPage+1, 10);">Следваща</a></li>
								</ul>
							</nav>

						</div>
						<div class="col">

						</div>
					</div>
				</div>

			</div>
		</div>

	</section><!-- End Info Section -->

	<!-


</main><!-- End #main -->

<!-- ======= Footer ======= -->
<footer id="footer" class="footer">


	<div class="footer-top">
		<div class="container">
			<div class="row gy-4">
				<div class="col-lg-5 col-md-12 footer-info">
					<a href="index.html" class="logo d-flex align-items-center">
						<img src="https://portal.sofiatraffic.bg/assets/logo/CGM-Logo-300x300px.png" alt="">
						<span>ЦСАОПСМГТ</span>
					</a>
					<p>Изготвили: Йорданов, Пеловски, Киров и Стаменков<br></p>
					<div class="social-links mt-3">
						<a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
						<a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
						<a href="#" class="instagram"><i class="bi bi-instagram bx bxl-instagram"></i></a>
						<a href="#" class="linkedin"><i class="bi bi-linkedin bx bxl-linkedin"></i></a>
					</div>
				</div>


			</div>
		</div>
	</div>

	<div class="container">
		<div class="copyright">
			Отбор <strong><span>Има такъв град</span></strong>
		</div>
		<div class="credits">
			InnoAirChallenge: Making mobility smarter 2021
		</div>
	</div>
</footer><!-- End Footer -->

<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
		class="bi bi-arrow-up-short"></i></a>

<!-- Vendor JS Files -->
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.js"></script>
<script src="assets/vendor/aos/aos.js"></script>
<script src="assets/vendor/php-email-form/validate.js"></script>
<script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
<script src="assets/vendor/purecounter/purecounter.js"></script>
<script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
<script src="assets/vendor/glightbox/js/glightbox.min.js"></script>

<!-- Template Main JS File -->
<script src="assets/js/main.js"></script>

<script>
    var output = document.getElementById("page");
    /*
	var xhr = new XMLHttpRequest();
	var maxPage = 0;
	var url = "192.168.43.117:8080/vehicles/";
	xhr.open("GET", url, true);
	xhr.setRequestHeader("Content-Type", "application/json");
	xhr.onreadystatechange = function () {
	  if (xhr.readyState === 4 && xhr.status === 200) {
		var json = JSON.parse(xhr.responseText);
		maxPage = json.number/10;
	  }
	};
	xhr.send();
  var i = 0;
  while(i < maxPage){
	//paginationContent.innerHTML += "<li class=""page-item""><a class=""page-link textColor"" href=""javascript:showPage("i+1", 10);"">"i+1"</a></li>";
	i++;
  }
*/
    var currentPage = 1;

    function showPage(page, pageSize) {
        currentPage = page;
        var output = document.getElementById("page");
        var url = 'http://192.168.43.117:8080/vehicles/?page=' + page - 1 + '&pageSize=' + pageSize;

        $.ajax({
            type: "GET",
            url: 'http://192.168.43.117:8080/vehicles/?page=0&size=10',
            data: JSON,
            success: function (data) {
                alert(data[0].id);
                var json = data;

                output.innerHTML += '<ul id = "content">';
                var content = document.getElementById("content");
                var paginationContent = document.getElementById("paginationContent");


                var pageNum = 0;
                var count = Object.keys(json).length;
                console.log(count);
                for (var i = 0; i < count; i++) {
                    var id = json[i].id;
                    var type = json[i].type;
                    pageNum += 1;
                    if(type === "TRAM")content.innerHTML += '<li class="list-item" onclick="parseVehicleNum(this);" value="' + id + '"> <button type="button" class="btn btn-warning btn-lg btn-block tram"><p class="vehicle-num"> <i class="fa fa-bus" class="icon"></i>  </p> <span class="vehicle-num">' + id + '</span> </button></li>'
                    if(type === "BUS")content.innerHTML += '<li class="list-item" onclick="parseVehicleNum(this);" value="' + id + '"> <button type="button" class="btn btn-danger btn-lg btn-block bus"><p class="vehicle-num"> <i class="fa fa-bus" class="icon"></i>  </p> <span class="vehicle-num">' + id + '</span> </button></li>'
                    if(type === "SUBWAY")content.innerHTML += '<li class="list-item" onclick="parseVehicleNum(this);" value="' + id + '"> <button type="button" class="btn btn-primary btn-lg btn-block trol"><p class="vehicle-num"> <i class="fa fa-bus" class="icon"></i>  </p> <span class="vehicle-num">' + id + '</span> </button></li>'
                }
                output.innerHTML += '</ul>';
            }
        });


    }

    showPage(1, 10);

    function parseVehicleNum(param) {
        alert(param.value);
        var vehicleNum = param.value;
        window.location = './second.html?vehicleNum=' + vehicleNum;
    }

    /*
		function searchVehicle(){
		  var output = document.getElementById("page");
		  var xhr = new XMLHttpRequest();
		  var vehicleNum = document.getElementById("searchBar").value;
		var url = "192.168.43.117:8080/vehicle/" + vehicleNum;

		$.get("192.168.43.117:8080/vehicle/1", function(data, status){
			alert("Data: " + data + "\nStatus: " + status);
				  var json = JSON.parse(xhr.responseText);
			  output.innerHTML = "";
			  output.innerHTML += '<ul id = "content">';
			  var content = document.getElementById("content");
			  for (var busNum in json) {
				content.innerHTML += '<li class="list-item" onclick="parseVehicleNum(this);" value="' + busNum.id + '"> <button type="button" class="btn btn-warning btn-lg btn-block tram"><p class="vehicle-num"> <i class="fa fa-bus" class="icon"></i>  </p> <span class="vehicle-num">' + busNum.id + '</span> </button></li>'
			  }
			  output.innerHTML += '</ul>';

		});

		}
	*/
</script>

</body>

</html>
